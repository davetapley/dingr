<h1>Tunes</h1>

<p>We have <%= @notes.sort.to_sentence %> available.</p>

<p>
Below is a list of all the tunes available, and whether we've matched them.
<br>
If a tune can be played in a different key to the given one, it'll be shifted accordingly.
</p>

<% @tunes.each do |t, t_match_notes| %>
  <hr>
  <h2><%= t.name %> <small><%= link_to 'more', t %></small></h2>
  <% if t_match_notes.versions.present? %>
    <p><b>Got <%=  pluralize t_match_notes.versions.size, 'version' %>!</b></p>
  <% else %>
    <b>Missing notes</b>, best match is <%= ((t_match_notes.best_version.available_mapping.size / t.uniq_notes.size.to_f) * 100).round %>% there!
  <% end %>

<% end %>

<hr>

<%= link_to 'Add new', new_tune_path %>
